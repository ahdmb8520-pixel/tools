<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Icons â†’ Google Sheet counter</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;padding:24px;background:#f7f8fb}
    h1{direction:rtl;text-align:center;margin-bottom:12px}
    .icons{display:flex;gap:18px;justify-content:center;align-items:center;flex-wrap:wrap}
    .icon-btn{
      width:96px;height:96px;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;
      background:white;box-shadow:0 6px 18px rgba(20,30,60,0.08);cursor:pointer;user-select:none;border:1px solid #e6e9f2;
      transition:transform .12s ease,box-shadow .12s ease;
    }
    .icon-btn:active{transform:translateY(2px);box-shadow:0 3px 10px rgba(20,30,60,0.06)}
    .icon-emoji{font-size:34px}
    .icon-label{margin-top:8px;font-size:14px}
    .counter{margin-top:18px;text-align:center;font-size:18px}
    .status{margin-top:8px;text-align:center;color:#555}
  </style>
</head>
<body>
  <h1>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© ÙÙŠ Google Sheet</h1>

  <div class="icons" aria-hidden="false">
    <div class="icon-btn" data-icon="star" title="Star">
      <div class="icon-emoji">â­</div>
      <div class="icon-label">Star</div>
      <div class="counter" id="count-star">â€”</div>
    </div>

    <div class="icon-btn" data-icon="heart" title="Heart">
      <div class="icon-emoji">â¤ï¸</div>
      <div class="icon-label">Heart</div>
      <div class="counter" id="count-heart">â€”</div>
    </div>

    <div class="icon-btn" data-icon="thumb" title="Thumb">
      <div class="icon-emoji">ğŸ‘</div>
      <div class="icon-label">Thumb</div>
      <div class="counter" id="count-thumb">â€”</div>
    </div>
  </div>

  <div class="status" id="status">Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ù‡Ø²</div>

  <script>
    // Ø¶Ø¹ Ù‡Ù†Ø§ Ø±Ø§Ø¨Ø· Web App Ø§Ù„Ø°ÙŠ Ø­ØµÙ„Øª Ø¹Ù„ÙŠÙ‡ Ù…Ù† Google Apps Script
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwR8w7bCHRHVikqt2UHo-3nOzQXqqpjMjf0CWRtTkF0812ubw5LyVokicvSvNOKy-PF/exec";
    // (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ø³Ø± Ø¨Ø³ÙŠØ· Ù„Ùˆ ÙØ¹Ù„Øª Ø§Ù„ØªØ­Ù‚Ù‚ ÙÙŠ Ø§Ù„Ø³ÙƒØ±Ø¨Øª
    const SECRET = "123";

    const statusEl = document.getElementById('status');

    // Ø¹Ù†Ø¯Ù…Ø§ ØªÙƒÙˆÙ† Ø§Ù„ØµÙØ­Ø© Ø¬Ø§Ù‡Ø²Ø©ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø¬Ù„Ø¨ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ù€ sheet
    // Ù‡Ù†Ø§ Ù†ÙØªØ±Ø¶ Ø£Ù†Ùƒ Ù„Ø§ ØªØ±ÙŠØ¯ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API Ø¥Ø¶Ø§ÙÙŠØ› Ø³Ù†Ø¹Ø±Ø¶ '-' Ø­ØªÙ‰ Ù†Ù‚ÙˆÙ… Ø¨Ø²ÙŠØ§Ø¯Ø© Ø£ÙˆÙ„ Ù…Ø±Ø©.
    // Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø£ÙˆÙ„ÙŠØ© â€” ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†ÙÙŠØ° endpoint Ø¢Ø®Ø± ÙÙŠ Apps Script ÙŠØ¹ÙŠØ¯ MAP Ø§Ù„Ù‚ÙŠÙ….

    document.querySelectorAll('.icon-btn').forEach(btn=>{
      btn.addEventListener('click', async ()=>{
        const icon = btn.getAttribute('data-icon');
        updateStatus("Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...");
        try {
          const resp = await fetch(WEB_APP_URL, {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({ icon: icon, secret: SECRET })
          });

          // Ù‚Ø±Ø§Ø¡Ø© JSON Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©
          const json = await resp.json();
          if (json.status === "ok") {
            // Ø­Ø¯Ù‘Ø« Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø­Ù„ÙŠ
            const counterEl = document.getElementById('count-' + icon);
            counterEl.textContent = json.newValue;
            updateStatus("ØªÙ…Øª Ø§Ù„Ø²ÙŠØ§Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­");
          } else {
            updateStatus("Ø®Ø·Ø£: " + (json.message || "unknown"));
            console.error("server error", json);
          }
        } catch (err) {
          updateStatus("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: " + err.message);
          console.error(err);
        }
      });
    });

    function updateStatus(t){
      statusEl.textContent = "Ø§Ù„Ø­Ø§Ù„Ø©: " + t;
    }
  </script>
</body>
</html>
